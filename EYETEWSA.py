import requests
import pandas as pd

headers={'cookie': 'FedAuth=77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48U2VjdXJpdHlDb250ZXh0VG9rZW4gcDE6SWQ9Il9iMTAwNTFiOS05ZDA4LTQxNDktOThhYS1lMGJmZjdlNTJhY2ItNTM1MDFDMjBERUZDQ0U2MERBRTgyNDIyRUY3NTZGMkMiIHhtbG5zOnAxPSJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy93c3MvMjAwNC8wMS9vYXNpcy0yMDA0MDEtd3NzLXdzc2VjdXJpdHktdXRpbGl0eS0xLjAueHNkIiB4bWxucz0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3Mtc3gvd3Mtc2VjdXJlY29udmVyc2F0aW9uLzIwMDUxMiI+PElkZW50aWZpZXI+dXJuOnV1aWQ6YmQyNGJiNzUtYmE4ZC00NTZiLTgxYWMtNTI3Njg3YmI5ZDgxPC9JZGVudGlmaWVyPjxDb29raWUgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwNi8wNS9zZWN1cml0eSI+QkZZRVZjNWVaSUpOTTlOUE01cVVMbHBpV1VDUVNsY2FxTkFiRnBINFhNVzVJQXZJR0I4dWFwU3BxMkFsN0g0dXBZak02ZmVsVGxNYVYxcDZIVlZCYkN2UHlhMTFqV2FyYVk5NVhQNy85cjg1U0NIdWNCaTdMeWlmTGlMeFYwWGYraVo3bWtKTVoyYzEwZEh1M3h4aTIwbWY3MEJydlloajY3VEVJS3NubjRneXZDRGh6cnl5REN3VnBtdlVpNWVjSVBnc2RlM0ZCd25yQzJQZHAzYXZHUUFteE5zdU1iekV0WU1qOGlKN3k5MURUbVNCVGJYQ0VnSG42ZEN3M0lpNnZVRUpaZ05LM0VqdE9pYzJWdmN3N0tQQTVzYk8ySGY5ejFxUjhBYWh6cGQzNnkyNnFJTWhLVVUyZ05QTFc4UlVzamluQ2V3clRiSGwrTktXYmlRK0xjWU44S0lLby9GTmRianlSbDNRdCtENTNqc3l1SmFCV0xhcndXYnBnWStIV1VoTjJiRk9zV1pNQ1MzM1piVlQzS1F2T2gwVDhwR0xvT1F6VDA4K1pSVi9FeVBxc0FscTdEdW5PWGlJMmJtTU1nY0VmcTREWjNRV0I1RFlnMU5ZZm96SkZpKzk2akhRbDRKekF2a2MzZWk0Uk94dzMzbDR3Q1VJS2kxZjNEZVFMaGY5RWRPV0hFa3UxU1I3a0pWK1hmeVZ2NzBtTWdYUlBMSE9XaXJ0V0FubXBLZXB1UE5qaFBIeDRmUmlyZHNaYWdISzlZbXpWSUdSMCs0T0pSVUVCd3pkdzJhcU4yc2hZRWQ3eDdFY0N5bnBEVnFCRUtvYWxqWTBsZHUxbWdrNzl1V1owbVkyU2ZHODN4OHc4VE5BZ2JQVTRnZ2hDWWFNYTRWS0d4eUdlaWgxSFlMdUJmeEx2Z2MyUzZtbWtXOVBMbHBkUk1CbUJGMmxrWDkzODVIYnZoNTNCODVDTGlkOHplRnJyQUMvUTRMOXhsWTZEeW5JZktWQXZ4VDhBQXpBcExDMDV5OHNhOUlMbVVuTGZ1S295bTBWcmVQNDRJb2lqTFpQN2V1M2pNUVN3WFVXR3RyOWE4emQxVWdkdzBSdE15OW9FOVNlVUJrc1MwNXltdnFMelJYcjV2d3pCWTVOYlU1VEhlQjRqTTRuTk9PYThIOVRuZURVR1dGTE55R0pPZVBlYUlndEowT1p4bWZMUW5PV0R2L1lVVnlIbEdLYnI5djVibHUwRnExSkMyT1pzSFMzRkJEVEpsTFluOXpvbkp3bGJNNmQ2Ris0Z2M2R1N1NTI1cnRjZW1qdWdHZVZQRWhPbDM1VWNlU014QnpSdFBqaTVuY0V0YzJETThtY3NnMnd2VjI4clM5T3lrQVowd3ByZkxiRndXWk5sc2twS2Zy; FedAuth1=dlhKS3ErN2dwUUlEQ0FaY2dDWVBOaVU4WXN3V3hJM1lsNzJkMVd0NHBOQ2cySjl0UlVOZGhCVWhYTjRkc0RtQzlqQjRVQVBnZUhiNS9xWmpweDZFQ1ArVnpTTlA2OGR0VnpNRWZtWitwSUFKS3dlYWdjTG5rUFhCczF2bzZVL2ZLaWdhRTZ5akgrVXFlckZ1TjZmaFJkQzVTNXFwdXMxdEVYZElsOHRlelcwZnN1VmZ0VGtOSFA2b3dKdmZwdWdiZnFMOWpLdTd4ZW5icFVuckNNZ0NDOFgwRnhsN0g0ZHJGLzFXVEdFZGxDZG9FaW5rVWJnWXc2UENGTGxHWUlmaEFjL1BjMnY5SXdVQ3dsSy9rbUF1WG9HWHZxUFB5MmN4WVhxdUVrdHR0WEhQSWJxaTNqRUdEaTh4bVpCMUdSa2s5RW1Gajd6Z0J4eGtGMXp6T3h4YUx4cUtsTVpCMDlPWnhrdXdwdU1sMVRhUXdnL2NJQmF1VmRmRVBSVDV1S3d3NTJ6TGVSaEtvUW9BTmtTQXFrMG5IbzRiV0VYNVRCbGI2UG1ZTll4aGIxaERVazV1WEk5ZUppNTdsejdWZXErWEZYcGxNWWFQMkhHQ3gzZmZSOHZpRHFiWmVyaWQ2TjNYR0pwRTVjcFZ4RXFiaUpxVldsVndLK25IRTlRdjlPT0draUNScEdoSVIxMm5jYjdPV1o1NWx4SHYyMGIyRU9nUWNvVmR1OHZkM200Z0YxOVFQUGUxSlkzRnU1ZjQrbC80ZE5tTUFMaWYwcUlSOUNqTVhrbHl0cUlmcnNtRUM3cGNIRWpGSDdrcW82SW55K2ZDQlRCQlU3eHUxWG1pOHNzM1BKbXBDQWZoYThFSStzbVJUdFY0Zkw4TmRCbFlSZThxTXl0WjhpWXExM0dTMXpCaUtOVktLeFIyY3N3S2plQTNMZnJ6WFp4QUJmNDNlYm0vU1o2VFBEcEZaWlA2b1JnSDNwemtXQjVlbXFvRnhJZHZJWXcyc1hkYjl1RldBM3Fyb2ZhbkJuY2RBSHhtZTBsakdWSmRsTjQrTGREUHc5cDlXRndSeU9tRkVabmUwUGVUZFczR0pMZU43Wm5zUnZ1SnFIY1pMMFNENm9WN010eWVyd0w5SFNnMC9KNEsxTFIrN2tqT2pPdkZqZ3NmdUNRMjAyS08yWlUvK0RWZXJVelVXblArbldMM05YVjN0NHVNeFdhUlA3K2xXMFhocVFlaTFDRDlybVdZVlRtM3Bnb0Q2WjEwRk5Cc0ZJV1VPUmlXamhQanJGOUxmeEtLQlpRR092elJqVjB5QmRlcVNnQ3o1ZlEzcmIwNTZaRFJBQUZYamRRPT08L0Nvb2tpZT48L1NlY3VyaXR5Q29udGV4dFRva2VuPg==; _hjSessionUser_1494715=eyJpZCI6ImQ0ZTI4MjhlLWY3YjUtNWNiZS1hMjRkLWUzMzY2YjJmZThiZCIsImNyZWF0ZWQiOjE3MzI3MDczMTIxNDcsImV4aXN0aW5nIjp0cnVlfQ==; __gsas=ID=aa879751e6250bbb:T=1744296499:RT=1744296499:S=ALNI_MaaJBLi6U39L2ATSZjEOSjKxTHiqA; __utma=211709392.586291915.1732748298.1747791979.1747838199.61; __utmc=211709392; __utmz=211709392.1747838199.61.52.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); IdSvr.WsFedTracking=2ybS2yy5urXNrOlLZsMutEA8m20S6hhr3VrvINdZ5X_dhw5MyoWMWaX14BPkaYKrb8MV6SNi2b_BhJHRJXQn8c7sAIoadp7_SuE6omJpJ8FqVCUud8WK7TV-cqMSfxKMeoRreJM_JhQ29DOP_W_oUMqga041WITnaOYz9btAktD28gOrmVjeidpK44J9ET1JWllgJZSActvngfTRXmU3u4uOIXEzNm5tkcAAZQlsxP6ZPnx0xoAqZR44GkYhIQ0GgI_1lirYAvrQjzsskffqZlxLkT3sd1Gn5djxf1DXkJY; _hjSession_1494715=eyJpZCI6ImU0N2MxOGIzLWIyYjgtNGE5Yy1hMDcyLTk2MDVlNWI2YzIxYiIsImMiOjE3NDc5MjQ3MzM4ODIsInMiOjAsInIiOjAsInNiIjowLCJzciI6MCwic2UiOjAsImZzIjowfQ==; logged_in=true; idle_timer=2025-05-22T14:39:06.715Z'}


"""Fetch and flatten all documents from event records for a given case ID."""
url = f"https://research.txcourts.gov/CourtRecordsSearch/case/b04183e55b355b628fa3d90671422f9b/events"
page_index = 0
all_documents = []
counter = 0
all_desc = []
while True:
    counter = counter + 1
    payload={"pageSize":20,"pageIndex":counter,"sortNewestToOldest":False,"searchText":None,"isSearchAll":True,"eventType":0}
    r = requests.post(url, headers=headers, json=payload).json()

    events = r['events']

    documents = [i.get('documents') for i in events]
    docs = [item for sublist in documents for item in sublist]

    desc = [i.get('description') for i in docs]


    all_desc.append(desc)

    if not desc:
        break

print(len(all_desc))